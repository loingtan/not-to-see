# Memory and Caching
shared_buffers = 512MB          # Recommended: 25-40% of total RAM (2GiB * 25% = 512MB)
effective_cache_size = 1536MB   # Recommended: 75% of total RAM (2GiB * 75% = 1.5GB)
work_mem = 16MB                 # Per-query memory. Good starting point.
maintenance_work_mem = 256MB    # For VACUUM, CREATE INDEX. Good for 2GiB.

# Connections
max_connections = 200           # Adjust based on your workload. If you use a connection pooler, you can set this lower.

# WAL and Checkpoints
checkpoint_timeout = 15min      # Increase to reduce I/O spikes
max_wal_size = 2GB              # Large enough for a high-write workload
min_wal_size = 512MB            # To avoid frequent checkpointing

# Parallelism (Adjusted for 2 CPUs)
max_worker_processes = 2        # Number of CPU cores
max_parallel_workers = 2        # Set equal to max_worker_processes
max_parallel_workers_per_gather = 1 # Keep low to prevent one query from hogging resources

# Logging and Monitoring
log_min_duration_statement = 100ms # Log slow queries for analysis